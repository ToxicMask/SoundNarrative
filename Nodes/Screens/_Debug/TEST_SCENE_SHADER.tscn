[gd_scene load_steps=54 format=2]

[ext_resource path="res://Assets/Images/Render/_RenderDropzone/Render.000.png" type="Texture" id=1]
[ext_resource path="res://Assets/Images/WHITE_BLOCK_128x128.png" type="Texture" id=2]
[ext_resource path="res://Resources/Shaders/TelevisionShader.gdshader" type="Shader" id=3]
[ext_resource path="res://Resources/Shaders/DistortionGlass.gdshader" type="Shader" id=4]
[ext_resource path="res://Resources/Shaders/RGBSlider.gdshader" type="Shader" id=5]
[ext_resource path="res://Resources/Shaders/TextureNoiseTransition.gdshader" type="Shader" id=6]
[ext_resource path="res://Resources/Shaders/TextureSlideTransition.gdshader" type="Shader" id=7]
[ext_resource path="res://Nodes/Objects/GameObjects/VisualEffects/FilmGrainOverlay.tscn" type="PackedScene" id=8]
[ext_resource path="res://Assets/Images/Textures/Anomaly1.png" type="Texture" id=9]
[ext_resource path="res://Assets/Images/WHITE_128x128.png" type="Texture" id=10]
[ext_resource path="res://Resources/Shaders/AnomalyV0.gdshader" type="Shader" id=11]
[ext_resource path="res://Resources/Gradients/AnomV1Gradient.tres" type="Texture" id=12]
[ext_resource path="res://Assets/Images/icon128.png" type="Texture" id=13]
[ext_resource path="res://Resources/Shaders/AnomalyObjectShader.gdshader" type="Shader" id=14]
[ext_resource path="res://Resources/Shaders/NoiseDissolve.gdshader" type="Shader" id=15]
[ext_resource path="res://Assets/Images/iconGrad128.png" type="Texture" id=16]
[ext_resource path="res://Resources/Shaders/BrightnessGradient.gdshader" type="Shader" id=17]
[ext_resource path="res://Nodes/_Debug/_DebugSchockScreen.gd" type="Script" id=18]
[ext_resource path="res://Resources/Shaders/ScreenPulse.gdshader" type="Shader" id=19]

[sub_resource type="ShaderMaterial" id=2]
shader = ExtResource( 5 )
shader_param/timeScale = 0.0
shader_param/scaleA = 0.29
shader_param/scaleB = 0.318
shader_param/modulateA = Color( 0.34902, 0.933333, 0.372549, 1 )
shader_param/modulateB = Color( 0.164706, 0.717647, 0.843137, 1 )
shader_param/modulateC = Color( 0.866667, 0.235294, 0.235294, 1 )

[sub_resource type="OpenSimplexNoise" id=5]
octaves = 9
period = 9.7
persistence = 0.98
lacunarity = 0.65

[sub_resource type="NoiseTexture" id=6]
noise = SubResource( 5 )

[sub_resource type="ShaderMaterial" id=4]
shader = ExtResource( 4 )
shader_param/distortionScale = 0.03
shader_param/distortionTexture = SubResource( 6 )

[sub_resource type="Shader" id=42]
code = "shader_type canvas_item;

uniform vec2 shockCenter = vec2(0.5);
uniform float force = 0.0;

void fragment(){
	vec2 disp = normalize(UV - shockCenter) *  force;
	COLOR = vec4( UV -disp, 0.0, 1.0 );
	COLOR = texture(TEXTURE, UV- disp);
}"

[sub_resource type="ShaderMaterial" id=41]
shader = SubResource( 42 )
shader_param/shockCenter = Vector2( 0.5, 0.5 )
shader_param/force = -0.734

[sub_resource type="Gradient" id=22]
interpolation_mode = 2

[sub_resource type="GradientTexture" id=23]
gradient = SubResource( 22 )

[sub_resource type="OpenSimplexNoise" id=20]

[sub_resource type="NoiseTexture" id=21]
noise = SubResource( 20 )

[sub_resource type="ShaderMaterial" id=19]
shader = ExtResource( 11 )
shader_param/radiansPerSecond = -0.9
shader_param/waveFactor = 0.09
shader_param/tintBright = 4.687
shader_param/anomalyMask = ExtResource( 9 )
shader_param/maskGradient = SubResource( 23 )
shader_param/noiseTexture = SubResource( 21 )
shader_param/tintGradient = ExtResource( 12 )

[sub_resource type="OpenSimplexNoise" id=26]
period = 20.8
persistence = 1.0
lacunarity = 4.0

[sub_resource type="NoiseTexture" id=27]
seamless = true
noise = SubResource( 26 )

[sub_resource type="ShaderMaterial" id=25]
shader = ExtResource( 14 )
shader_param/gradientOffset = 0.0
shader_param/waveSpeed = 1.0
shader_param/waveScale = 20.0
shader_param/waveStrength = 180.0
shader_param/waveFactor = 1.0
shader_param/line_color = Color( 1, 0, 0, 1 )
shader_param/mask_thickness = 1.0
shader_param/colorGradient = ExtResource( 12 )
shader_param/noiseTexture = SubResource( 27 )

[sub_resource type="OpenSimplexNoise" id=11]
seed = -1
period = 0.1
persistence = 0.0
lacunarity = 0.1

[sub_resource type="NoiseTexture" id=12]
width = 32
height = 32
seamless = true
noise = SubResource( 11 )

[sub_resource type="ShaderMaterial" id=10]
shader = ExtResource( 3 )
shader_param/staticOffset = 0.0
shader_param/grayscaleFactor = true
shader_param/noiseFactor = 0.3
shader_param/noiseBright = 0.0
shader_param/tint = Color( 1, 1, 1, 1 )
shader_param/noiseTexture = SubResource( 12 )

[sub_resource type="Gradient" id=31]
offsets = PoolRealArray( 0, 0.223529, 0.903704, 1 )
colors = PoolColorArray( 1, 1, 1, 1, 1, 0.0195313, 0.0195313, 1, 0, 0, 0, 1, 0, 0, 0, 0 )

[sub_resource type="GradientTexture" id=32]
gradient = SubResource( 31 )

[sub_resource type="OpenSimplexNoise" id=33]
octaves = 2
period = 80.0
persistence = 0.0

[sub_resource type="NoiseTexture" id=30]
width = 1024
height = 1024
noise = SubResource( 33 )

[sub_resource type="ShaderMaterial" id=29]
resource_local_to_scene = true
shader = ExtResource( 15 )
shader_param/disappearFactor = 0.0
shader_param/noiseTexture = SubResource( 30 )
shader_param/gradientTexture = SubResource( 32 )

[sub_resource type="Gradient" id=38]
offsets = PoolRealArray( 0, 0.223529, 1 )
colors = PoolColorArray( 0, 0, 0, 1, 0.95, 0.95, 0.95, 1, 1, 1, 1, 0 )

[sub_resource type="GradientTexture" id=39]
gradient = SubResource( 38 )

[sub_resource type="ShaderMaterial" id=35]
resource_local_to_scene = true
resource_name = "NoiseDissolve"
shader = ExtResource( 17 )
shader_param/fadeFactor = 0.0
shader_param/brightGradient = SubResource( 39 )

[sub_resource type="Shader" id=36]
code = "shader_type canvas_item;

uniform float rotationPower= 0.0;
uniform float rotationSpeed= 1.0;

void vertex(){
	VERTEX.x +=  (rotationPower) * sin(TIME * rotationSpeed);
	VERTEX.y +=  (rotationPower) * cos(TIME * rotationSpeed);
}

void fragment(){
	//COLOR = vec4(0.0, UV.x, UV.y, 1.0);
}"

[sub_resource type="ShaderMaterial" id=37]
shader = SubResource( 36 )
shader_param/rotationPower = 32.0
shader_param/rotationSpeed = -1.0

[sub_resource type="ShaderMaterial" id=44]
resource_name = "Screen Pulse"
shader = ExtResource( 19 )
shader_param/colorModulate = Color( 0.5, 0.5, 0.5, 0.552941 )
shader_param/pulseCenter = Vector2( 0.5, 0.5 )
shader_param/force = 0.03
shader_param/radius = 0.0
shader_param/thick = 0.001
shader_param/innerBlur = 0.15
shader_param/blur = 0.05

[sub_resource type="Animation" id=45]
length = 0.001
tracks/0/type = "value"
tracks/0/path = NodePath(".:material:shader_param/radius")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ 0.0 ]
}

[sub_resource type="Animation" id=46]
resource_name = "_DebugPulse"
length = 1.8
tracks/0/type = "value"
tracks/0/path = NodePath(".:material:shader_param/radius")
tracks/0/interp = 1
tracks/0/loop_wrap = false
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1.67, 1.98 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 0,
"values": [ 0.0, 2.0, 2.0 ]
}

[sub_resource type="ShaderMaterial" id=17]
shader = ExtResource( 7 )
shader_param/interFactor = 0.0

[sub_resource type="Gradient" id=15]
interpolation_mode = 1

[sub_resource type="GradientTexture" id=16]
gradient = SubResource( 15 )
width = 1024

[sub_resource type="ShaderMaterial" id=14]
shader = ExtResource( 6 )
shader_param/interFactor = 0.0

[node name="TEST_SCENE_SHADER" type="Node2D"]
__meta__ = {
"_edit_lock_": true
}

[node name="NoShade" type="Sprite" parent="."]
texture = ExtResource( 1 )
centered = false
__meta__ = {
"_edit_lock_": true
}

[node name="ScreenEffects" type="Node2D" parent="."]

[node name="RGBSliders" type="Sprite" parent="ScreenEffects"]
visible = false
material = SubResource( 2 )
texture = ExtResource( 1 )
centered = false

[node name="GlassScreenDistortion" type="Sprite" parent="ScreenEffects"]
visible = false
modulate = Color( 0.490196, 0.901961, 0.901961, 1 )
material = SubResource( 4 )
position = Vector2( 138, 345 )
texture = ExtResource( 2 )

[node name="SuctionTexture" type="Sprite" parent="ScreenEffects"]
visible = false
material = SubResource( 41 )
texture = ExtResource( 1 )
centered = false

[node name="Anomalities" type="Node2D" parent="."]

[node name="SmallAnomality" type="Sprite" parent="Anomalities"]
material = SubResource( 19 )
position = Vector2( 154, 332 )
rotation = 1.57079
scale = Vector2( 0.551139, 0.54067 )
texture = ExtResource( 10 )

[node name="CorruptObject" type="Sprite" parent="Anomalities"]
material = SubResource( 25 )
position = Vector2( 228, 354 )
scale = Vector2( 0.742188, 0.765625 )
texture = ExtResource( 13 )

[node name="ObjectTextureEffects" type="Node2D" parent="."]

[node name="TelevisionTextureShader" type="Sprite" parent="ObjectTextureEffects"]
visible = false
material = SubResource( 10 )
texture = ExtResource( 1 )
centered = false

[node name="NoiseDissolve" type="Sprite" parent="ObjectTextureEffects"]
material = SubResource( 29 )
position = Vector2( 742, 250 )
scale = Vector2( 0.742188, 0.765625 )
texture = ExtResource( 13 )

[node name="BrightFade" type="Sprite" parent="ObjectTextureEffects"]
material = SubResource( 35 )
position = Vector2( 588, 258 )
scale = Vector2( 0.742188, 0.765625 )
texture = ExtResource( 16 )

[node name="TintFade3" type="Sprite" parent="ObjectTextureEffects"]
material = SubResource( 37 )
position = Vector2( 479, 204 )
scale = Vector2( 0.742188, 0.765625 )
texture = ExtResource( 13 )

[node name="ScreenOverlayLayer" type="CanvasLayer" parent="."]
follow_viewport_enable = true

[node name="SchockScreen" type="ColorRect" parent="ScreenOverlayLayer"]
material = SubResource( 44 )
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -1.0
margin_right = -1.0
script = ExtResource( 18 )

[node name="Anim" type="AnimationPlayer" parent="ScreenOverlayLayer/SchockScreen"]
anims/RESET = SubResource( 45 )
anims/_DebugPulse = SubResource( 46 )

[node name="FilmGrainOverlay" parent="ScreenOverlayLayer" instance=ExtResource( 8 )]
visible = false
__meta__ = {
"_edit_lock_": true
}

[node name="Transitions" type="Control" parent="ScreenOverlayLayer"]
visible = false

[node name="DiagonalTransition" type="Sprite" parent="ScreenOverlayLayer/Transitions"]
visible = false
material = SubResource( 17 )
scale = Vector2( 1, 600 )
texture = SubResource( 16 )
centered = false

[node name="NoiseTransition" type="Sprite" parent="ScreenOverlayLayer/Transitions"]
material = SubResource( 14 )
scale = Vector2( 1, 600 )
texture = SubResource( 16 )
centered = false
